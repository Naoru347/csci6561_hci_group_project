<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>FocusWrite: Task</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
      crossorigin="anonymous"
    />
  </head>
  <body>
    <header>
      <h4 id="fullscreenWarning" class="text-danger text-center mt-3 ms-3 d-none">
        WARNING: If you click ESC or try to leave fullscreen mode in any other way without clicking Submit, your current draft will be submitted automatically and you won't be able to resume the assignment.
      </h4>
      <div class="p-5 bg-primary text-white text-center">
        <h1>FocusWrite</h1>
        <p>
          Complete your assignment here.
        </p>
        <!-- Logout Button (absolute top-right) -->
        <a href="#" id="btnLogout" class="btn btn-danger position-absolute top-0 end-0 m-3">
          Logout
      </a>
      </div>
    </header>

    <!-- Slider for font size adjustment -->
    <div class="row justify-content-center align-items-center mt-3">
      <div class="col-auto w-25 text-end">
          <label for="fontSizeSlider" class="form-label">Font Size:</label>
      </div>
      <div class="col-auto w-25">
          <input 
              type="range" 
              id="fontSizeSlider" 
              min="12" 
              max="24" 
              value="16" 
              class="form-range"
          />
      </div>
      <div class="col-auto w-25">
          <span id="fontSizeValue" class="ms-2">16px</span>
      </div>
  </div>
    
    <!-- Prompt to Confirm Beginning of Assignment -->
     <div id="divConfirmationBlock" class="container mt-3">
      <div class="row">
        <div class="col col-6 offset-3">
          <div class="card mb-4">
            <div class="card-header">
              <h2 class="card-title m-0">Ready to Begin the Assignment?</h2>
            </div>
            <div class="card-body">
              <!-- Box for instructions -->
                <p class="mb-0">
                  Once you click Begin, your window will go into fullscreen mode, limiting your access to resources outside this window until you complete and submit the assignment.
                </p>
                <div class="container text-end mt-5">
                  <button id="btnBackHome" class="btn btn-outline-danger">Back to Landing Page</button>
                  <button id="btnBegin" class="btn btn-primary">Begin</button>
                </div> 
            </div>
          </div>
        </div>
      </div>

     </div>
    
     <!-- Text area  and Links to Allowed Resources -->
    <div id="divTextAndLinksBlock" class="container d-none mt-3"> 
      <div class="row">
        
        <!-- Text area  col -->
        <div class="col col-9">
          <div class="row">
            <div class="col">
              <div class="card">
                <div class="card-header">
                  <h2 class="card-title m-0">Assignment Title</h2>
                </div>
                <div class="card-body bg-light">
                  <form method="post">
                    <textarea id="textareaInput">
                      Type and edit your text here.
                    </textarea>
                  </form>
                  <div class="container mt-3">
                    <p>NOTE: Your text is saved as you type.</p>
                    <p>Click <strong>Submit and Leave</strong> when you are ready to submit the assignment for grading.</p>
                  </div>
                  <div class="container text-end mt-5">
                    <button id="btnSubmit" class="btn btn-primary">Submit and Leave</button>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>

      <!-- Additional resources col -->
      <div class="col col-3">

        <div class="accordion" id="accordionExample">
          
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Assignment Prompt
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
              <div id="promptLink" class="accordion-body">
                <!-- Add the link in task.js, depending on the name of the assignment prompt file. -->
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                Uploaded Resources
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
              <div id="uploadedResourcesLinks" class="accordion-body">
                <!-- Build the list of links in task.js, depending on the number of uploaded resources -->
              </div>
            </div>
          </div>

          <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                External Links
              </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
              <div id="externalLinks" class="accordion-body">
                <!-- Build the list of links in task.js, depending on the number of uploaded resources -->
              </div>
            </div>
          </div>

        </div>
        
      </div>


    </div>

    <!-- Modals -->

    <!-- This container is for displaying modals with additional resources -->
    <div id="modalContainer"></div>

    <!-- This modal is for warning about leaving fullscreen without submitting -->
    <div class="modal fade modal-lg" id="confirmSubmitModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h5 class="modal-title">Ready to Submit?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <!-- Modal Body -->
          <div class="modal-body">
            <p><strong>Are you sure you want to submit the assignment?</strong> <span id="modalAssignmentName"></span></p>
            <p>If you click yes, your assignment will be submitted for grading.</p>
          </div>
          <!-- Modal Footer -->
          <div class="modal-footer">
            <a href="#" id="continueLink" class="btn btn-outline-danger">No, Go Back to Assignment</a>
            <button id="confirmSubmitBtn" type="button" class="btn btn btn-primary" data-bs-dismiss="modal">Yes, Submit and Leave</button>
          </div>
        </div>
      </div>
    </div>  

    
    <!-- Scripts -->

    <!-- Bootstrap Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
      crossorigin="anonymous">
    </script>

    <!-- TinyMCE Script -->
    <script src="https://cdn.tiny.cloud/1/63pwtpcqtm1lzqgywma7wa4xe21lr6c2i0rxoqs3j9x0n69a/tinymce/7/tinymce.min.js" 
      referrerpolicy="origin">
    </script>
    <script>
      tinymce.init({
        selector: '#textareaInput',
        setup: function (editor) {
          // Store the editor instance globally
          window.myEditor = editor;
          // Dispatch a custom event when the editor is initialized
          document.dispatchEvent(new Event('editorInitialized'));
        },
        menubar: false,
        plugins: 'advlist autolink lists link charmap preview anchor searchreplace visualblocks code fullscreen insertdatetime media table help wordcount',
        toolbar: 'undo redo | blocks fontfamily fontsize | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help',
      });
    </script>

    <!-- Slider Script: Later Link to J's file font_slider.js: <script src="../Scripts/font_slider.js"></script> -->
     <script>
      document.addEventListener("DOMContentLoaded", function () {
          const fontSizeSlider = document.getElementById("fontSizeSlider");
          const fontSizeValue = document.getElementById("fontSizeValue");
          const body = document.body;

          // Function to update font size
          function updateFontSize(size) {
              body.style.fontSize = size + "px";
              fontSizeValue.textContent = size;
              
              // Save preference in localStorage
              localStorage.setItem("preferredFontSize", size);
          }

          // Event listener for slider changes
          fontSizeSlider.addEventListener("input", function () {
              updateFontSize(this.value);
          });

          // Load saved font size from localStorage (if available)
          const savedFontSize = localStorage.getItem("preferredFontSize");
          if (savedFontSize) {
              fontSizeSlider.value = savedFontSize;
              updateFontSize(savedFontSize);
          } else {
              // Initialize with default value
              updateFontSize(fontSizeSlider.value);
          }
      });
     </script>


    <!-- Task Script -->
    <script src="../Scripts/task.js"></script>
    <!-- <script src="../Scripts/additionalResourcesModal.js"></script> -->
  </body>
</html>